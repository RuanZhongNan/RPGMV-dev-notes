(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{595:function(t,a,s){"use strict";s.r(a);var e=s(5),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"项目调试方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目调试方式"}},[t._v("#")]),t._v(" 项目调试方式")]),t._v(" "),s("p",[t._v("按F8进行debug。")]),t._v(" "),s("h2",{attrs:{id:"update方法原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#update方法原理"}},[t._v("#")]),t._v(" update方法原理")]),t._v(" "),s("p",[t._v("update一帧运行一次、refresh一般是需要的时候、调用一下刷新。")]),t._v(" "),s("h2",{attrs:{id:"类的定义方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类的定义方式"}},[t._v("#")]),t._v(" 类的定义方式")]),t._v(" "),s("p",[t._v("mv项目的绝大多数类采用"),s("a",{attrs:{href:"https://blog.csdn.net/iteye_9339/article/details/81473212",target:"_blank",rel:"noopener noreferrer"}},[t._v("混合的构造函数/原型方式"),s("OutboundLink")],1),t._v("来定义。")]),t._v(" "),s("h2",{attrs:{id:"类的继承方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类的继承方式"}},[t._v("#")]),t._v(" 类的继承方式")]),t._v(" "),s("p",[t._v("mv项目中的绝大多数类采用"),s("a",{attrs:{href:"https://blog.csdn.net/xgy123xx/article/details/106019671",target:"_blank",rel:"noopener noreferrer"}},[t._v("寄生组合式继承"),s("OutboundLink")],1),t._v("的方式来完成类的继承。")]),t._v(" "),s("h3",{attrs:{id:"寄生组合式继承定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#寄生组合式继承定义"}},[t._v("#")]),t._v(" 寄生组合式继承定义")]),t._v(" "),s("p",[t._v("所谓寄生组合式继承，即通过借用构造函数来继承属性，通过原型链的混成形式来继承方法。其背后的基本思路是：不必为了指定子类型的原型而调用超类型的构造函数，我们所需要的无非就是超类型原型的一个副本而已。本质上，就是使用寄生式继承来继承超类型的原型，然后再将结果指定给子类型的原型。"),s("a",{attrs:{href:"https://blog.csdn.net/qq_35718410/article/details/91412908",target:"_blank",rel:"noopener noreferrer"}},[t._v("引自《JavaScript高级程序设计》"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("其中，我们常见的"),s("code",[t._v("Object.create()")]),t._v("方法是"),s("code",[t._v("ES5")]),t._v("中"),s("strong",[t._v("原型式继承")]),t._v("的规范化。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/weixin_36465540/article/details/90176318",target:"_blank",rel:"noopener noreferrer"}},[t._v("点此查阅更多细节。"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("结合上面两个部分的内容，作者有了以下的理解:")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("理解")]),t._v(" "),s("p",[t._v("方法的定义与继承均在"),s("code",[t._v("prototype")]),t._v("原型链完成，属性则是在"),s("code",[t._v("function")]),t._v("类本身中定义，且继承的时候也是用构造函数来完成属性的继承。")])]),t._v(" "),s("h2",{attrs:{id:"object-create-实现继承的例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-create-实现继承的例子"}},[t._v("#")]),t._v(" Object.create()实现继承的例子")]),t._v(" "),s("p",[t._v("由于作者水平有限，尚不能理解透彻该部分的继承。这里粘贴了和mv项目几乎相同的继承例子，作为本小节内容。"),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/orphaned/Web/JavaScript/Reference/Global_Objects/Object/create",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN.Object.create()"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Shape - 父类(superclass)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Shape")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 父类的方法")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Shape")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("move")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Shape moved.'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Rectangle - 子类(subclass)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Rectangle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Shape")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// call super constructor.}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子类续承父类")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Rectangle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Shape")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Rectangle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Rectangle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" rect "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Rectangle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Is rect an instance of Rectangle?'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  rect "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Rectangle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Is rect an instance of Shape?'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  rect "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Shape")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\nrect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("move")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Outputs, 'Shape moved.'")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("h2",{attrs:{id:"mv继承的简单示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mv继承的简单示例"}},[t._v("#")]),t._v(" mv继承的简单示例")]),t._v(" "),s("p",[t._v('mv采用了"寄生组合式继承"，即————通过借用构造函数来继承属性，通过原型链的混成形式来继承方法。以'),s("code",[t._v("Scene_Base")]),t._v("为例：")]),t._v(" "),s("p",[s("code",[t._v("Scene_Base")]),t._v("类通过"),s("code",[t._v("Stage.prototype.initialize.call(this);")]),t._v("的方式，来继承来自父类"),s("code",[t._v("Stage")]),t._v("的属性。")]),t._v(" "),s("p",[t._v("通过"),s("code",[t._v("Scene_Base.prototype = Object.create(Stage.prototype);")]),t._v(" 和 "),s("code",[t._v("Scene_Base.prototype.constructor = Scene_Base;")]),t._v(" 的原型链方式继承来自父类Stage的方法。")]),t._v(" "),s("h2",{attrs:{id:"对mv源码的总体理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对mv源码的总体理解"}},[t._v("#")]),t._v(" 对mv源码的总体理解")]),t._v(" "),s("p",[t._v("以下内容为作者自己的理解，不一定准确。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("理解")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在"),s("code",[t._v("JavaScript ES5")]),t._v("版本中，继承写法的最优解是"),s("strong",[t._v("寄生组合式继承")]),t._v("，使用"),s("code",[t._v("call(this)")]),t._v('方法来实现子构造方法调用父构造方法，实现"属性"的继承；使用'),s("code",[t._v("Object.create")]),t._v("和"),s("code",[t._v("prototype.constructor")]),t._v('的方式实现原型链指向，实现"方法"的继承。')])]),t._v(" "),s("li",[s("p",[t._v("在"),s("code",[t._v("JavaScript ES6")]),t._v('版本中，使用语法糖可以同时实现"'),s("strong",[t._v("属性")]),t._v('"和"'),s("strong",[t._v("方法")]),t._v('"的继承。')])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("mv源码")]),t._v("中的"),s("code",[t._v("call(this)")]),t._v("写法目的是为了实现继承；"),s("strong",[t._v("mv插件")]),t._v("的"),s("code",[t._v("call(this)")]),t._v("写法目的是为了实现方法功能拓展。")])]),t._v(" "),s("li",[s("p",[t._v("mv插件编写原理是：使用"),s("code",[t._v("call(this)")]),t._v("方法调用原来的方法，做出功能拓展，利用"),s("code",[t._v("PluginsManager")]),t._v("的"),s("code",[t._v("document.appendChild")]),t._v("方法实现代码的导入，并利用V8引擎实现的"),s("strong",[t._v("词法作用域")]),t._v("与变量原理实现"),s("code",[t._v("JavaScript")]),t._v("的"),s("strong",[t._v("方法覆盖")]),t._v("，最后实现mv源码调用mv插件的方法。")])]),t._v(" "),s("li",[s("p",[t._v("mv插件写法的本质是"),s("strong",[t._v("直接修改mv源码")]),t._v("。")])])])]),t._v(" "),s("h3",{attrs:{id:"参考文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("MDN")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create#%E7%94%A8_object.create%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%BC%8F%E7%BB%A7%E6%89%BF",target:"_blank",rel:"noopener noreferrer"}},[t._v("用object.create实现类式继承"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call#%E4%BD%BF%E7%94%A8_call_%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E7%88%B6%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用call方法调用父构造函数"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Objects/Inheritance",target:"_blank",rel:"noopener noreferrer"}},[t._v("继承"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain",target:"_blank",rel:"noopener noreferrer"}},[t._v("继承与原型链"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[t._v("CSDN")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/weixin_36465540/article/details/90176318",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS基础--组合继承，寄生组合式继承"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/qq_35718410/article/details/91412908",target:"_blank",rel:"noopener noreferrer"}},[t._v("寄生组合式继承"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/lixiaosenlin/article/details/108140634",target:"_blank",rel:"noopener noreferrer"}},[t._v("javascript 的七种继承方式（六）寄生组合式继承"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/xgy123xx/article/details/106019671",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.csdn.net/xgy123xx/article/details/106019671"),s("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=n.exports}}]);